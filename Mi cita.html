<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Cita - Dra. Corniel</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@300;600&display=swap" rel="stylesheet">
    
    <style>
        /* Estilos generales */
        body {
            font-family: 'Poppins', sans-serif;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: #ffffff;
            padding: 20px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        header .logo h1 {
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            color: #005f73;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: flex-end;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: #333;
            font-weight: 600;
        }

        .appointment-section {
            padding: 60px 0;
            text-align: center;
        }

        .appointment-section h2 {
            font-size: 2.5em;
            color: #007f91;
            margin-bottom: 40px;
        }

        .widget {
            position: relative;
            margin-bottom: 20px;
            text-align: left;
            background-color: #ffffff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            color: #333;
        }

        .widget input,
        .widget select {
            width: 100%;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            font-family: 'Poppins', sans-serif;
            font-size: 1em;
            background-color: #f4f4f9;
            margin-bottom: 20px;
        }

        .button-container {
            margin-bottom: 30px;
        }

        .zoom-button {
            background-color: #94d2bd;
            color: #ffffff;
            padding: 15px 20px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2em;
            text-decoration: none;
        }

        .zoom-button:hover {
            background-color: #007f91;
        }

        .details-section {
            text-align: left;
            margin-bottom: 30px;
        }

        .details-section h3 {
            font-size: 1.8em;
            color: #007f91;
            margin-bottom: 20px;
        }

        .info-section {
            background-color: #edf6f9;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
            text-align: left;
        }

        .info-section h3 {
            font-size: 1.5em;
            color: #007f91;
            margin-bottom: 20px;
        }

        .info-section p {
            color: #555;
            line-height: 1.6;
        }

        .info-section a {
            color: #007f91;
            text-decoration: none;
        }

        footer {
            background-color: #ffffff;
            padding: 20px 0;
            border-top: 1px solid #e0e0e0;
            margin-top: 40px;
        }

        footer .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        footer nav ul {
            display: flex;
        }

        footer nav ul li {
            margin-left: 20px;
        }
    </style>
</head>
<body>

    <!-- Encabezado con navegación -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Dra. Corniel</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="about.html">Sobre Mí</a></li>
                    <li><a href="services.html">Servicios</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="contact.html">Contacto</a></li>
                    <li><a href="reservar_cita.html" class="btn-primary">Reservar Cita</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Sección Mi Cita -->
    <section class="appointment-section">
        <div class="container">
            <h2>Mi Cita</h2>

            <!-- Campo para ingresar el nombre del usuario -->
            <div class="widget">
                <label for="userName">Ingresa tu Nombre:</label>
                <input type="text" id="userName" placeholder="Tu Nombre">
                <button id="loadAppointment" class="zoom-button">Cargar Detalles</button>
            </div>

            <!-- Botón de Zoom -->
            <div class="button-container">
                <a href="https://zoom.us/j/tu_zoom_id" target="_blank" class="zoom-button">Ir a Sala de Zoom</a>
            </div>

            <!-- Detalles de la Cita -->
            <div class="details-section">
                <h3>Detalles de la Cita</h3>
                <div class="widget">
                    <p><strong>Nombre:</strong> <span id="nombre"></span></p>
                </div>
                <div class="widget">
                    <p><strong>Fecha:</strong> <span id="fecha"></span></p>
                </div>
                <div class="widget">
                    <p><strong>Servicio:</strong> <span id="servicio"></span></p>
                </div>
                <div class="widget">
                    <p><strong>Duración:</strong> <span id="duracion"></span></p>
                </div>
            </div>

            <!-- Selección de Pago -->
            <div class="details-section">
                <h3>Opciones de Pago</h3>
                <div class="widget">
                    <label for="paymentMethod">Selecciona tu banco:</label>
                    <select id="paymentMethod" onchange="redirectToBank()">
                        <option value="">Selecciona una opción</option>
                        <option value="https://www.popularenlinea.com/Personas/BancaDigital/BancaEnLinea/Paginas/Transferencias.aspx">Banco Popular</option>
                        <option value="https://www.banreservas.com.do/personas/canales/banreservas-en-linea/transferencias">BanReservas</option>
                        <option value="https://www.bhdleon.com.do/personas/canales-digitales/bhdleon-virtual">Banco BHD</option>
                    </select>
                </div>
                <div class="widget">
                    <label for="transactionId">Número de Transacción:</label>
                    <input type="text" id="transactionId" placeholder="Ingresa el número de transacción">
                </div>
                <button id="confirmPayment" class="zoom-button">Confirmar Pago</button>
            </div>

            <!-- Información Adicional -->
            <div class="info-section">
                <h3>Instrucciones para la Cita</h3>
                <p>Por favor, asegúrate de unirte a la sala de Zoom al menos 5 minutos antes de la hora programada. Si necesitas cancelar o reprogramar tu cita, hazlo con al menos 24 horas de antelación para evitar cargos adicionales.</p>
                <p>Para reprogramar tu cita, <a href="contact.html">contáctanos aquí</a>.</p>
            </div>
        </div>
    </section>

    <!-- Pie de página -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 Dra. Corniel. Todos los derechos reservados.</p>
                <nav>
                    <ul>
                        <li><a href="privacy-policy.html">Política de Privacidad</a></li>
                        <li><a href="contact.html">Contacto</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </footer>

    <!-- JavaScript para obtener datos de Airtable y manejar el pago -->
    <script>
        document.getElementById('loadAppointment').addEventListener('click', function() {
            const apiKey = 'tu_api_key_de_airtable';
            const baseId = 'tu_base_id_de_airtable';
            const tableName = 'Nombre_de_tu_tabla';

            const userName = document.getElementById('userName').value; // Obteniendo el nombre del usuario ingresado
            const url = `https://api.airtable.com/v0/${baseId}/${tableName}?filterByFormula=Nombre="${userName}"`;

            fetch(url, {
                headers: {
                    Authorization: `Bearer ${apiKey}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.records.length > 0) {
                    const record = data.records[0].fields;
                    document.getElementById('nombre').textContent = record.Nombre;
                    document.getElementById('fecha').textContent = record.Fecha;
                    document.getElementById('servicio').textContent = record.Servicio;
                    document.getElementById('duracion').textContent = record.Duracion;
                } else {
                    alert('No se encontraron citas para el usuario especificado.');
                }
            })
            .catch(error => {
                console.error('Error al obtener los datos de Airtable:', error);
            });
        });

        function redirectToBank() {
            const paymentMethod = document.getElementById('paymentMethod').value;
            if (paymentMethod) {
                window.open(paymentMethod, '_blank');
            }
        }

        document.getElementById('confirmPayment').addEventListener('click', function() {
            const transactionId = document.getElementById('transactionId').value;

            if (!transactionId) {
                alert('Por favor, ingresa el número de transacción.');
                return;
            }

            alert('Pago confirmado exitosamente. Tu cita ha sido reservada.');
            // Aquí puedes agregar la lógica para guardar la información de la cita como confirmada
        });
    </script>
</body>
</html>

